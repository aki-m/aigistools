<html lang="ja"><head>
 <META http-equiv="Content-Type" content="text/html;"  charset="UTF-8">
 <META http-equiv="Content-Script-Type" content="text/javascript">
 <META http-equiv="Content-Style-Type" content="text/css">
 <title>兵舎キャラ点呼</title>
</head>
<body>
<div nowrap>
<b>兵舎キャラ点呼　　　　　　　　　　　　　　　　　</b>
<span style="font-size:13px;position:absolute;top:0px;right:0px;"><a href="../ikusei2.html">...育成試算表</a><br><a href="../meisei.html">...名声値カレンダー</a><br><a href="../buff.html">...バフ試算表</a></span>
</div>

<pre>
使い方
・このページのhtmlをＰＣに保存する
・同じ場所に兵舎のスクショを置く
　　ファイル名は1.png , 2.png ...(拡張子は選択したもの)
・まとめる列数、縦方向のスクショ数(行数)を選択
・スクショの切り抜き部分を入力
・下に表示された画像を名前をつけて保存(IE以外)
</pre>
<div>
<select id="cols">
  <option value=1>１列</option>
  <option value=2>２列</option>
  <option value=3 selected="selectef">３列</option>
  <option value=4>４列</option>
  <option value=5>５列</option>
  <option value=6>６列</option>
  <option value=7>７列</option>
  <option value=8>８列</option>
  <option value=9>９列</option>
</select>
<select id="rows">
  <option value=1>１行</option>
  <option value=2>２行</option>
  <option value=3>３行</option>
  <option value=4>４行</option>
  <option value=5>５行</option>
  <option value=6>６行</option>
  <option value=7 selected="selected">７行</option>
  <option value=8>８行</option>
  <option value=9>９行</option>
</select>
<select id="ext">
  <option value=".png">スクショ拡張子は.png</option>
  <option value=".jpg">スクショ拡張子は.jpg</option>
  <option value=".jpeg">スクショ拡張子は.jpeg</option>
  <option value=".bmp">スクショ拡張子は.bmp</option>
</select>
くりぬき左上Ｘ位置<input type="number" min=0 max=9999 size=4 id="sx" value=370 />
Ｙ位置<input type="number" min=0 max=9999 size=4 id="sy" value=50  />
幅<input type="number" min=0 max=9999 size=4 id="sw" value=590 />
高さ<input type="number" min=0 max=9999 size=4 id="sh" value=590 />
ヘッダ部高さ<input type="number" min=0 max=9999 size=4 id="hh" value=30  />
</div>
<canvas id="cv"></canvas>
<script language="javascript">
function makeimage(ev){
  var cv=document.getElementById("cv");
  var sx=document.getElementById("sx").value/1;
  var sy=document.getElementById("sy").value/1;
  var sw=document.getElementById("sw").value/1;
  var sh=document.getElementById("sh").value/1;
  var hh=document.getElementById("hh").value/1;
  cv.width    = sw * document.getElementById("cols").value;
  cv.height   = (sh-hh) * document.getElementById("rows").value + hh;
  makeimage.i = 0;
  makeimage.img.src = (makeimage.i+1)+document.getElementById("ext").value; /*最初のイメージ*/
}
makeimage.img = new Image();
makeimage.img.onload = function (){
  var sx=document.getElementById("sx").value/1;
  var sy=document.getElementById("sy").value/1;
  var sw=document.getElementById("sw").value/1;
  var sh=document.getElementById("sh").value/1;
  var hh=document.getElementById("hh").value/1;
  var cols=document.getElementById("cols").value/1;
  var rows=document.getElementById("rows").value/1;
  var y= makeimage.i % rows;
  document.getElementById("cv").getContext("2d").drawImage( makeimage.img ,sx ,sy+(y?hh:0) ,sw ,sh ,Math.floor(makeimage.i/rows)*sw,y*(sh-hh)+(y?hh:0),sw,sh );
  if( ++makeimage.i < cols*rows ) makeimage.img.src=(makeimage.i+1)+document.getElementById("ext").value; /*2つ目以降のイメージ*/
};
document.body.onload=makeimage;
document.body.addEventListener( "change", makeimage );
</script>
</body>
</html>

<html lang="ja"><head>
 <META http-equiv="Content-Type" content="text/html;"  charset="UTF-8">
 <META http-equiv="Content-Script-Type" content="text/javascript">
 <META http-equiv="Content-Style-Type" content="text/css">
 <title>千年戦争アイギス　バフ計算機</title>
<!--
　　　　 r＝、､　　　　　　　　 , '⌒ヽ 
　　　　((::::::..ヽヽ　_＿＿　 　{ i:::::::l |　
　　　 　 ﾞ ､::::::l |´　＼＼ ｀ヽj !::::://　
　　　　／　〉:::l |　　　|::::| 　//:::://　
　　 ／匕 ＞(：：)二二二二(：：)く ＼　
　　 {ゞ|／　／　 , 　　j　　i　 ; ヽ ヽ ﾉ 
　 　У　／i　　!/|⌒/| 　 lﾘ⌒j　Y´ 
　　 人/ lr'| 　 仡示ﾉ !__/ r示ﾐ　| 
　 く;;_;;| ,ﾊ_| 　i|弋ソ　　 　弋ｿ.{　!　 まだできてないです
　　/::::| l ! .!,　|ﾄ"" 　　__ 　 "''从j 　 それでも使うです？
　 ,'.::::人ﾄ(从ｲ!心、_　｀´ _ ｡彳)/ 
　 |:::::!　|::::|_人(ｧ 个｀Y〔ｰ､ 　ノ 
　 |:::::|　|:r'ﾞ!.|　｀ .く__,小._,ハ
TIPS
・グループの左端の＋－はクリックで折りたためる
・自己バフONに選択すると対象キャラにあわせるようにユニ条件を自動で反映
・スキルバフONに選択すると対象のキャラがもつ編成･配置バフもON
・選択や数字を変更すると、そのときの呪文が復活の呪文に表示される(予定)
・メモっておいた呪文を入力して[復活]で復元できる
・[復活]はURLを更新しているので、それを保存してもよい。
・というわけで、変更→[復活]→ブクマ とすればメモる必要はない
・このツールのアップデートに対し呪文の互換性がない
・通信していないので、PCにページを保存して、それを使えばOK

・性別バフはトークンのときはかからない。ニエルは女性扱い
-->
 <style>
td{ padding: 3px 0px 2px 0px; }
select,div>span{ font-size:18px; height:100%; margin:0px; }
select{ background-color: yellow; padding:0px 0px 4px 04px; }
.x-b input { font-size:16px;}
table td[is="x-d"] { text-align:center; }
span{ padding:3px 2px 2px 2px; }
#t{
 border:solid 1px blue;
 border-collapse: collapse;
 margin:0px 0px 0px 0px; 
 user-select:none;
 -webkit-user-select:none;
 -moz-user-select:none;
 -ms-user-select:none;
 -o-user-select:none;
 cursor:default;
}
#t td, span{ border: solid 1px #00f;  }
#t tr.bufftype{ border-style:solid; border-color:#00f; border-width: 1px 1px 0px 1px;}
#t tr td{ background:#eff; color:#888; }
#t tr.on td{ background:#bef; color:black; }
#t th,#t tr.t th.csw{ background-color: steelblue; color:white; }
#t tr.f th,#t tr.f td{background-color:honeydew; color:#163; border-bottom:solid 1px blue; }
#t tr.t th{ background-color:#fd6; color:#632; }
#t tr.t td{ background-color:#fed; color:black; }
input[type="number"] {  text-align:center;  }
input[type="button"] {
 background-color: #e8ffff;
 border: solid 1px #999;
 border-radius: 5px;
 padding: 0px 8px;
 margin:1px 3px;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 -moz-user-select: none;
 -ms-user-select: none;
 -o-user-select: none;
}
input.bon { background-color: #ff4; }
input.chk { display:inline; background-color:#90ffcf; }

 </style>
</head>
<body>

<script> 
document.body.onload=function(olev){
  var typs=["アビ","アビ２","スキル","スキルCC","スキル覚醒","称号"]; /*<= 未使用*/
  var buf={
    "編成バフ(全体)":{
      "全員の最大ＨＰアップ【中】":{   on:0 ,v:[10, 0, 0,0, 0] ,cn:["アデル"         ] },
      "全員の最大ＨＰアップ【大】":{   on:0 ,v:[14, 0, 0,0, 0] ,cn:["アイシャ"       ] },
      "全員の攻撃力アップ【小】":{     on:0 ,v:[ 0, 2, 0,0, 0] ,cn:["アリア"         ] },
      "全員の攻撃力アップ【中】":{     on:0 ,v:[ 0, 5, 0,0, 0] ,cn:["ウズメ","レオラ"] },
      "全員の攻撃力アップ【大】":{     on:0 ,v:[ 0, 7, 0,0, 0] ,cn:["キキョウ"       ] },
      "全員の防御力アップ【小】":{     on:0 ,v:[ 0, 0, 2,0, 0] ,cn:["ケイティ"       ] },
      "全員の防御力アップ【中】":{     on:0 ,v:[ 0, 0, 5,0, 0] ,cn:["レン"           ] },
      "全員の防御力アップ【大】":{     on:0 ,v:[ 0, 0, 7,0, 0] ,cn:["イリス"         ] },
      "難攻不落の要塞":{               on:0 ,v:[ 0, 0,17,0, 0] ,cn:["ルイーズ"       ] },
      "舞巫女の守護霊":{               on:0 ,v:[0,0,0,50000,0] ,cn:["ミヤビ"         ] }
    },
    "編成バフ(近・遠,性別限定)":{
      "打ち出の小槌":{                 on:0 ,v:[ 0, 5, 0,0, 0] ,cn:["カグラ"      ] ,chkf:["XXXXXX0XX"] },
      "剣聖武芸指南":{                 on:0 ,v:[ 0,10, 0,0, 0] ,cn:["ジークリンデ"] ,chkf:["XXXXXX0XX"] },
      "六丈銭の赤備え":{               on:0 ,v:[ 5, 5, 5,0, 0] ,cn:["マツリ"      ] ,chkf:["XXXXXX0XX"] },
      "魔法防壁":{                     on:0,v:[0,0,0,100000,0] ,cn:["グレース"    ] ,chkf:["XXXXXX0XX"] },
      "トレジャーハント【魔水晶】":{   on:0 ,v:[0,0,0,50000,0] ,cn:["モニカ"      ] ,chkf:["XXXXXX1XX"] },
      "マスタースミス＋武器職人【男専用】":{on:0,v:[0,5,5,0,0] ,cn:["ゴルドー"   ] ,chkf:["XXXXXX01X"] },
      "マスタースミス＋鍛冶神の祝福":{ on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ティニー"    ] ,chkf:["XXXXXX00X"] },
      "防御力魔法耐性アップ【男】":{   on:0 ,v:[0,0,5,50000,0] ,cn:["オスカー"    ] ,chkf:["XXXXXXX1X"] },
      "トレジャーハント【酒】":{       on:0 ,v:[15, 0, 0,0, 0] ,cn:["ロベルト"    ] ,chkf:["XXXXXXX1X"] }
    },
    "編成バフ(職種,種族限定)":{
      /* 職種 */
      "撤退支援":{                     on:0 ,v:[20, 0, 0,0, 0] ,cn:["アルティア"  ] ,chkf:["X1  XXXXX"] },
      "シールドブースト":{             on:0, v:[0,0,5,50000,0] ,cn:["リーゼロッテ"] ,chkf:["X1  XXXXX","X2  XXXXX"]},
      "ヘビーアーマーの防御力アップ":{ on:0, v:[ 0, 0, 7,0, 0] ,cn:["ベルニス"    ] ,chkf:["X2  XXXXX"] },
      "ヘビーアーマーの攻撃力アップ":{ on:0, v:[ 0, 7, 0,0, 0] ,cn:["ミランダ"    ] ,chkf:["X2  XXXXX"] },
      "ワルキューレの攻撃力アップ":{   on:0, v:[ 0, 7, 0,0, 0] ,cn:["ダリア"      ] ,chkf:["X3  XXXXX"] },
      "英雄の守り手":{                 on:0, v:[15, 0, 0,0, 0] ,cn:["レシア"      ] ,chkf:["X3  XXXXX","X10 XXXXX","X22 XXXXX"]},
      "トレジャーハント【宝石】":{     on:0 ,v:[ 0,15, 0,0, 0] ,cn:["キュテリ"    ] ,chkf:["X4  XXXXX","X121XXXXX"] },
      "山賊の攻撃力アップ":{           on:0, v:[ 0, 7, 0,0, 0] ,cn:["コンラッド"  ] ,chkf:["X6  XXXXX"] },
      "山賊の最大ＨＰアップ":{         on:0, v:[15, 0, 0,0, 0] ,cn:["イメリア"    ] ,chkf:["X6  XXXXX"] },
      "サムライの防御力アップ":{       on:0, v:[ 0, 0, 7,0, 0] ,cn:["コジュウロウ"] ,chkf:["X8  XXXXX"] },
      "サムライ、忍者の攻撃力アップ":{ on:0, v:[ 0, 7, 0,0, 0] ,cn:["シズカ"      ] ,chkf:["X8  XXXXX","X9  XXXXX"] },
      "ペガサスライダー攻撃力アップ":{ on:0, v:[ 0, 7, 0,0, 0] ,cn:["イザベル"    ] ,chkf:["X10 XXXXX"] },
      "モンクの攻撃力アップ":{         on:0, v:[ 0, 7, 0,0, 0] ,cn:["リン"        ] ,chkf:["X13 XXXXX"] },
      "魔法剣士の攻撃力アップ":{       on:0, v:[ 0, 7, 0,0, 0] ,cn:["サビーネ"    ] ,chkf:["X15 XXXXX"] },
      "天使長の号令":{                 on:0, v:[ 0, 5, 0,0, 0] ,cn:["ミルノ"      ] ,chkf:["X16 XXXXX"] },
      "戦う機甲技師":{                 on:0, v:[ 0, 5, 0,0, 0] ,cn:["ボリス"      ] ,chkf:["X17 XXXXX"] },
      "ゴッドブレス":{                 on:0, v:[0,0,0,0,100000],cn:["エクス"      ] ,chkf:["X20 XXXXX","X103XXXXX","X113XXXXX","X124XXXXX"] },
      "強化魔導鎧":{                   on:0, v:[ 5, 5, 5,0, 0] ,cn:["パルフィ"    ] ,chkf:["X21 XXXXX"] },
      "馬上弓術指南":{                 on:0, v:[ 0, 5, 0,0, 0] ,cn:["カティナ"    ] ,chkf:["X23 XXXXX"] },
      "侍女の忠誠（術士）":{           on:0, v:[ 0, 7, 0,0, 0] ,cn:["シャーリー"  ] ,chkf:["X109XXXXX","X130XXXXX"] }, /*ビショップ、エレメンタラー*/
      "侍女の献身(無法者)":{           on:0, v:[ 7, 0, 0,0, 0] ,cn:["アイリーン"  ] ,chkf:["X6  XXXXX"] }, /*山賊*/
      "侍女の献身(無法者)":{           on:0, v:[ 0, 5, 0,0, 0] ,cn:["アイリーン"  ] ,chkf:["X105XXXXX"] }, /*海賊*/
      "侍女の献身(王子・皇帝・姫)":{   on:0, v:[10,10,10,0, 0] ,cn:["セーラ"      ] ,chkf:["60  1 010","60  1 011","X5  XXXXX"] }, /*王子/皇帝/全プリンセス系*/
      "勝利の槍":{                     on:0, v:[ 0, 5, 5,0, 0] ,cn:["アリシア"    ] ,chkf:["X27 XXXXX","X3  XXXXX","X10 XXXXX","X22 XXXXX"] }, /*ロイガ、ワル、ペガ、ドラゲ*/
      "帝国騎士の鼓舞":{               on:0, v:[ 0, 7, 0,0, 0] ,cn:["アリーセ"    ] ,chkf:["X35 XXXXX"] }, /*インペ*/
      "前衛軍師の最大HPアップ":{       on:0, v:[15, 0, 0,0, 0] ,cn:["シャオ"      ] ,chkf:["X14 XXXXX"] },
      "アーチャーの攻撃力アップ":{     on:0, v:[ 0, 7, 0,0, 0] ,cn:["スピカ"      ] ,chkf:["X101XXXXX"] },
      "神業の手ほどき":{               on:0, v:[ 0,10, 0,0, 0] ,cn:["アーシェラ"  ] ,chkf:["X101XXXXX","X120XXXXX","X23 XXXXX"] }, /*弓、レンジャイ、ボーライダ*/
      "メイジの攻撃力アップ":{         on:0, v:[ 0, 7, 0,0, 0] ,cn:["ガラニア"    ] ,chkf:["X102XXXXX"] },
      "魔力調律":{                     on:0, v:[ 0,10, 0,0, 0] ,cn:["エステル"    ] ,chkf:["X102XXXXX","X109XXXXX","X21 XXXXX"] },/*ﾒｲｼﾞ､ﾋﾞｼｮ､ﾒｲｼﾞｱｰﾏｰ*/
      "ヒーラーの攻撃力アップ":{       on:0, v:[ 0, 7, 0,0, 0] ,cn:["ユーノ"      ] ,chkf:["X103XXXXX"] },
      "ウィッチの攻撃力アップ":{       on:0, v:[ 0, 7, 0,0, 0] ,cn:["ベリンダ"    ] ,chkf:["X104XXXXX"] },
      "海賊の攻撃力アップ":{           on:0, v:[ 0, 7, 0,0, 0] ,cn:["アネリア"    ] ,chkf:["X105XXXXX"] },
      "海賊の火砲戦術":{               on:0, v:[0,0,0,0,100000],cn:["ミネルバ"    ] ,chkf:["X105XXXXX","X114XXXXX","X126XXXXX"] }, /*海賊、砲術、商人*/
      "聖矢の祝福":{                   on:0, v:[ 0, 7, 0,0, 0] ,cn:["ルマリア"    ] ,chkf:["X107XXXXX"] },
      "祖霊の追い風":{                 on:0, v:[0,0,0,0,100000],cn:["スー"        ] ,chkf:["X101XXXXX","X107XXXXX","X120XXXXX"] }, /*弓、VH、レンジャイ*/
      "大地の気脈":{                   on:0, v:[ 0, 5, 0,0, 0] ,cn:["ピピン"      ] ,chkf:["X113XXXXX"] },
      "大司教の威厳":{                 on:0, v:[ 0,13, 0,0, 0] ,cn:["ベルゼッタ"  ] ,chkf:["X103XXXXX","X124XXXXX"] },
      "悪魔召喚士の秘儀":{             on:0, v:[ 0, 0, 0,5, 0] ,cn:["リヴル"      ] ,chkf:["X129XXXXX"] },
      "マスタースミス＋ソードスミス":{ on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["サンディー"  ] ,chkf:["X1  XXXXX","X8  XXXXX","X11 XXXXX","X14 XXXXX","X26 XXXXX","X35 XXXXX","60  1 010"] }, /*ソードスミス*/
      /* 両方 */
      "竜巫女の祝福":{                 on:0, v:[ 5, 0, 5,0, 0] ,cn:["エキドナ"    ] ,chkf:["XXXX2 XXX","X22 XXXXX"] }, /*竜族*/
      "ドラゴンフォース":{             on:0, v:[ 0, 7, 0,0, 0] ,cn:["ルビナス"    ] ,chkf:["XXXX2 XXX","X22 XXXXX"] }, /*竜族*/
      /* 種族 */
      "妖精姫の祝福":{                 on:0 ,v:[15, 5, 0,0, 0] ,cn:["オリヴィエ"  ] ,chkf:["XXXX3 XXX","XXXX4 XXX"] }, /*エルフ、ドワーフ*/
      "要請の堅陣":{                   on:0 ,v:[0,0,5,50000,0] ,cn:["ププル"      ] ,chkf:["XXXX3 XXX","XXXX4 XXX"] }, /*エルフ、ドワーフ*/
      "侍女の忠誠（亜人）":{           on:0 ,v:[ 0,10, 0,0, 0] ,cn:["リーナ"      ] ,chkf:["XXXX3 XXX","XXXX4 XXX"] }, /*エルフ、ドワーフ*/
      "侍女の忠誠（亜人）":{           on:0 ,v:[15, 0, 0,0, 0] ,cn:["リーナ"      ] ,chkf:["XXXX9 XXX"] }, /*オーク */
      "白面金毛九尾の狐":{             on:0 ,v:[0,10,10,100000,0],cn:["カヨウ"    ] ,chkf:["XXXX6 XXX"] }, /*妖怪*/
      "影の総大将":{                   on:0 ,v:[ 5, 5, 5,0, 0] ,cn:["カスミ"      ] ,chkf:["XXXX6 XXX"] }, /*妖怪*/
      "ヒロイックオーク":{             on:0 ,v:[ 0,10,10,0, 0] ,cn:["アナトリア"  ] ,chkf:["XXXX9 XXX","XXXX10XXX"] }, /*オーク、ゴブリン*/
      "屍体活性":{                     on:0 ,v:[ 5, 5, 5,0, 0] ,cn:["レイメイ"    ] ,chkf:["XXXX8 XXX"] }, /*不死者*/
      "侍女の献身（カグヤ）":{         on:0 ,v:[ 0,10,10,0, 0] ,cn:["ヒカゲ"      ] ,chkf:["45  1 000"] }, /*カグヤ*/
    },
    "編成バフ(所属,レアリティ限定)":{
      /* 所属 */
      "隠された神器の後継者":{         on:0 ,v:[ 5, 5, 5,0, 0] ,cn:["アンジェリーネ"  ] ,chkf:["XXXXXXXX1"] },
      "帝国治癒士の務め":{             on:0 ,v:[5,0,0,50000,0] ,cn:["エリアス"        ] ,chkf:["XXXXXXXX1"] },
      "帝国軍師の号令":{               on:0 ,v:[ 0, 0, 7,0, 0] ,cn:["レオナ"          ] ,chkf:["XXXXXXXX1"] },
      "ヤシャスィーン":{               on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["アルスラーン"    ] ,chkf:["XXXXXXXX2"] },
      "戦意高揚【砂漠】":{             on:0 ,v:[ 0,10, 0,0, 0] ,cn:["王子(砂漠)"      ] ,chkf:["XXXXXXXX3"] },
      /* レアリティ */
      "夏祭りの小さな思い出":{         on:0 ,v:[15,0,15,0,0] ,cn:["浴衣の兵長フィリス"] ,chkf:["0XXXXXXXX","1XXXXXXXX"]},
      "夏祭りの思い出":{               on:0 ,v:[20,0,20,0,0] ,cn:["浴衣の兵長フィリス"] ,chkf:["0XXXXXXXX","1XXXXXXXX"]},
      "シルバーフルチャージ":{         on:0 ,v:[ 5,0, 0,0,0] ,cn:["ロゼット"          ] ,chkf:["2XXXXXXXX"] },
      "騎士姫の導き":{                 on:0 ,v:[ 5,5, 5,0,0] ,cn:["シェリー"          ] ,chkf:["2XXXXXXXX"] }
    },

    "配置バフ(全体)":{
      "戦意高揚":{                     on:0 ,v:[0,20,20,0,0] ,cn:["王子(アイギス神器)","王子(ケラウノス神器)"] },
      "戦意高揚【砂漠】":{             on:0 ,v:[0,20,20,0,0] ,cn:["王子(砂漠)"        ] },
      "戦意高揚【小】":{               on:0 ,v:[0,10,10,0,0] ,cn:["王子【幼少】"      ] },
      "幸せの記憶":{                   on:0 ,v:[0, 5, 5,0,0] ,cn:["レーヴ"            ] },
      "魔眼の加護":{                   on:0 ,v:[0, 0, 5,5,0] ,cn:["バロウス"          ] },
      "聖銀竜の加護":{                 on:0 ,v:[0, 0, 5,5,0] ,cn:["ティファ"          ] },
      "職：コマンダー":{               on:0 ,v:[0,3,3,30000,0],cn:["アルティア","ジェローム","ケイティ","浴衣の兵長フィリス"] }
    },
    "配置バフ(近・遠,性別限定)":{
      "酒池肉林(対女性)":{             on:0 ,v:[0,10, 0,0,0] ,cn:["堕姫"              ] ,chkf:["XXXXXXX0X"] },
      "酒池肉林(対男性)":{             on:0 ,v:[0,-10,0,0,0] ,cn:["堕姫"              ] ,chkf:["XXXXXXX1X"] },
      "超鎧狩り":{                     on:0 ,v:[0,10, 0,0,0] ,cn:["アマンダ"          ] ,chkf:["XXXXXX0XX"] },
      "スピリットブーストⅡ":{         on:0 ,v:[0,13,13,0,0] ,cn:["シンシア"          ] ,chkf:["XXXXXX0XX"] },
      "ブーストミサイル":{             on:0 ,v:[0,10, 0,0,0] ,cn:["ソシエ"            ] ,chkf:["XXXXXX1XX"] },
      "マスタースミス＋武器職人【男専用】":{ on:0,v:[0,15,15,0,0],cn:["ゴルドー"        ] ,chkf:["XXXXXX01X"] },
      "マスタースミス＋鍛冶神の祝福":{ on:0 ,v:[0,15,15,0,0] ,cn:["ティニー"          ] ,chkf:["XXXXXX00X"] }
    },
    "配置バフ(職種,種族限定)":{
      /* 職種 */
      "火力支援指揮":{                 on:0 ,v:[ 0,10, 0,0, 0] ,cn:["ヘレナ"          ] ,chkf:["X114XXXXX","X105XXXXX","X126XXXXX"] },
      "マスタースミス＋ソードスミス":{ on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["サンディー"      ] ,chkf:["X1  XXXXX","X8  XXXXX","X11 XXXXX","X14 XXXXX","X26 XXXXX","X35 XXXXX","60  1 010"] }, /*ソードスミス*/
      "魔戦団長の号令":{               on:0 ,v:[ 0,10,10,0, 0] ,cn:["イングリッド"    ] ,chkf:["X15 XXXXX","X21 XXXXX","X102XXXXX","X109XXXXX"] },
      "一等航海士の指揮":{             on:0 ,v:[ 0,10, 0,0, 0] ,cn:["アメリ"          ] ,chkf:["X18 XXXXX","X105XXXXX"] }, /*水兵、海賊*/
      "聖典の導き":{                   on:0 ,v:[ 0,10, 0,0, 0] ,cn:["フェルミ"        ] ,chkf:["X20 XXXXX","X103XXXXX"] }, /*神官,ヒラ*/
      "逆撃の防陣":{                   on:0 ,v:[ 0, 5,10,0, 0] ,cn:["ミレイユ"        ] ,chkf:["X2  XXXXX","X27 XXXXX"] }, /*鎧,ロイガ*/
      "迫撃の号令":{                   on:0 ,v:[ 0,10,10,0, 0] ,cn:["エルミラ"        ] ,chkf:["X33 XXXXX","X35 XXXXX"] }, /*重装砲兵,インペ*/
      "未来の天才召喚士":{             on:0 ,v:[ 0,10, 0,0, 0] ,cn:["リノ"            ] ,chkf:["X112XXXXX"] },
      "ハイネクロマンシー":{           on:0 ,v:[ 0,15, 0,0, 0] ,cn:["メトゥス"        ] ,chkf:["X116XXXXX","XXXX8 XXX","X200XXXXX"] }, /*ネクロ、不死者、骨*/
      "森と動物の守り人":{             on:0 ,v:[ 0,10, 0,0, 0] ,cn:["メープル"        ] ,chkf:["X3  XXXXX","X23 XXXXX","X118XXXXX","X120XXXXX"], }, /*馬、ボーライダー、ドルイド、レンジャー*/
      "罠威力向上":{                   on:0 ,v:[ 0,10, 0,0, 0] ,cn:["アイーダ"        ] ,chkf:["X217XXXXX"] }, /*トラップ*/
      "魔獣調教II":{                   on:0 ,v:[ 0,0,100,0, 0] ,cn:["モルテナ"        ] ,chkf:["X202XXXXX"] }, /*犬*/
      "大商人の才覚":{                 on:0 ,v:[ 0,50, 0,0, 0] ,cn:["ディエーラ"      ] ,chkf:["X201XXXXX"] }, /*マーセナリー*/
      "デモンエンハンス":{             on:0 ,v:[ 0,100,0,0, 0] ,cn:["ラピス"          ] ,chkf:["X204XXXXX"] }, /*インプ*/
      "上級風霊使役":{                 on:0 ,v:[0,0,0,100000,0],cn:["ハルカ"          ] ,chkf:["X214XXXXX"] }, /*風エレ*/
      /* 両方 */
      "ドラゴンスケイル":{             on:0 ,v:[ 0, 0,10,0, 0] ,cn:["イグニス"        ] ,chkf:["XXXX2 XXX","X22 XXXXX"] },
      "ロードオブドラゴン":{           on:0 ,v:[ 0,15, 0,0, 0] ,cn:["エルドラ"        ] ,chkf:["XXXX2 XXX","X22 XXXXX"] },
      /* 種族 */
      "闇妖精の女王":{                 on:0 ,v:[ 0,10, 0,0, 0] ,cn:["ドロテア"        ] ,chkf:["XXXX3 XXX","XXXX4 XXX"] }, /*エルフ、ドワーフ*/
      "魔神団長の号令":{               on:0 ,v:[ 0,10, 0,0, 0] ,cn:["メフィスト"      ] ,chkf:["XXXX7 XXX","XXXX9 XXX","XXXX10XXX"] }, /*デーモン、オーク、ゴブ*/
      "龍の天祐?+Aさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Bさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Cさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Dさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Eさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Fさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Gさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Hさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Iさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] },
      "龍の天祐?+Jさん(+1人)":{        on:0 ,v:[ 0, 5, 5,0, 0] ,cn:["ハクノカミ"      ] ,chkf:["61062 100"] }
    },
    "配置バフ(自己・確立,動的)":{
      "魔剣覚醒？":{                   on:0 ,v:[ 0,80, 0,0, 0] ,cn:["シビラ"          ] ,setf:"65  1 000" ,chkf:["65  1 000"] },
      "ホーリーエンチャント？":{       on:0 ,v:[ 0,80, 0,0, 0] ,cn:["コーネリア"      ] ,setf:"611 1 000" ,chkf:["65  1 000"] },
      "大鑑巨砲":{                     on:0 ,v:[ 0,90, 0,0, 0] ,cn:["イブキ"          ] ,setf:"618 1 000" ,chkf:["618 1 000"] },
      "マルダーンフ・マルダーン":{     on:0 ,v:[ 0,20, 0,0, 0] ,cn:["ダリューン"      ] ,setf:"627 1 012" ,chkf:["627 1 012"] },
      "必殺の一撃":{                   on:0 ,v:[ 0,90, 0,0, 0] ,cn:["ユリアン","ドロシー" ] }
    },
    "スキルバフ(自己)":{                                                                                              
      "英雄の片鱗":{           skill:1,on:0 ,v:[300,300,300,0,0],cn:["王子【幼少】"       ] ,setf:"60  1 010" ,chkf:["60  1 010"] },
      "アイギスの神器":{       skill:1,on:0 ,v:[0,200,200,0,0] ,cn:["王子(アイギス神器)"  ] ,setf:"60  1 010" ,chkf:["60  1 010"] },
      "ケラウノスの神器":{     skill:1,on:0 ,v:[0,200,  0,0,0] ,cn:["王子(ケラウノス神器)"] ,setf:"60  1 010" ,chkf:["60  1 010"] },
      "獅子刀スルフィカール":{ skill:1,on:0 ,v:[0,150,  0,0,0] ,cn:["王子(砂漠)"          ] ,setf:"60  1 010" ,chkf:["60  1 010"] },
      "援軍要請・撃滅":{       skill:5,on:0 ,v:[0,200,  0,0,0] ,cn:["アルティア"          ] ,setf:"61  1 000" ,chkf:["61  1 000"] },
      "怪力爆砕鉄球":{         skill:5,on:0 ,v:[0,200,200,0,0] ,cn:["ディーナ"            ] ,setf:"62  1 000" ,chkf:["62  1 000"] },
      "大震撃":{               skill:5,on:0 ,v:[0,  0,140,0,0] ,cn:["ディーネ"            ] ,setf:"62  1 000" ,chkf:["62  1 000"] },
      "勝利のルーン(1回目)":{  skill:5,on:0 ,v:[0,180,180,0,0] ,cn:["クリッサ"            ] ,setf:"63  1 000" ,chkf:["63  1 000"] },
      "勝利のルーン(2回目)":{  skill:5,on:0 ,v:[0,240,240,0,0] ,cn:["クリッサ"            ] ,setf:"63  1 000" ,chkf:["63  1 000"] },
      "勝利のルーン(最終)":{   skill:5,on:0 ,v:[0,300,300,0,0] ,cn:["クリッサ"            ] ,setf:"63  1 000" ,chkf:["63  1 000"] },
      "死の旋風":{             skill:5,on:0 ,v:[0,190,  0,0,0] ,cn:["ベルナ"              ] ,setf:"64  1 000" ,chkf:["64  1 000"] },
      "魔剣アンサラー":{       skill:5,on:0 ,v:[0,200,  0,0,0] ,cn:["シビラ"              ] ,setf:"65  1 000" ,chkf:["65  1 000"] },
      "聖剣アルタキエラ":{     skill:5,on:0 ,v:[0,130,  0,0,0] ,cn:["オリヴィエ"          ] ,setf:"65  3 000" ,chkf:["65  3 000"] },
      "金剛鎌ハルパー":{       skill:5,on:0 ,v:[0,  0,180,0,0] ,cn:["アンジェリーネ"      ] ,setf:"65  1 001" ,chkf:["65  1 001"] },
      "吸血剣フルンティング(1回目)":{ skill:5,on:0,v:[0,140,140,0,0],cn:["シルヴィア"     ] ,setf:"65  8 000" ,chkf:["65  8 000"] },
      "吸血剣フルンティング(2回目)":{ skill:5,on:0,v:[0,220,220,0,0],cn:["シルヴィア"     ] ,setf:"65  8 000" ,chkf:["65  8 000"] },
      "吸血剣フルンティング(最終)":{  skill:5,on:0,v:[0,300,300,0,0],cn:["シルヴィア"     ] ,setf:"65  8 000" ,chkf:["65  8 000"] },
      "神剣ティルフィング":{   skill:5,on:0 ,v:[0,150,150,0,0] ,cn:["純白の花嫁カルマ"    ] ,setf:"65  8 000" ,chkf:["65  8 000"] },
      "死剣ミュルグレス":{     skill:5,on:0 ,v:[0,200,200,0,0] ,cn:["ミサ"                ] ,setf:"65  0 000" ,chkf:["65  0 000"] },
      "死剣ミュルグレス(対人間)":{ skill:5,on:0 ,v:[0,300,300,0,0] ,cn:["ミサ"            ] ,setf:"65  0 000" ,chkf:["65  0 000"] },
      "大山賊時代":{           skill:5,on:0 ,v:[0,200,  0,0,0] ,cn:["アマンダ"            ] ,setf:"66  1 000" ,chkf:["66  1 000"] },
      "回復Ⅳ":{               skill:5,on:0 ,v:[0,200,  0,0,0] ,cn:["ドラニア"            ] ,setf:"67  2 010" ,chkf:["67  2 010"] },
      "輝剣クラウ・ソラス":{   skill:5,on:0 ,v:[0,200,  0,0,0] ,cn:["アーニャ"            ] ,setf:"67  2 000" ,chkf:["67  2 000"] },
      "魔剣バルムンク":{       skill:5,on:0 ,v:[0,170,  0,0,0] ,cn:["エルドラ"            ] ,setf:"67  2 000" ,chkf:["67  2 000"] },
      "鬼切の初太刀":{         skill:5,on:0 ,v:[0,230,230,0,0] ,cn:["ヒバリ"              ] ,setf:"68  1 000" ,chkf:["68  1 000"] },
      "鬼切の初太刀(対妖怪)":{ skill:5,on:0 ,v:[0,345,345,0,0] ,cn:["ヒバリ"              ] ,setf:"68  1 000" ,chkf:["68  1 000"] },
      "鬼切":{                 skill:5,on:0 ,v:[0,200,200,0,0] ,cn:["ヒバリ"              ] ,setf:"68  1 000" ,chkf:["68  1 000"] },
      "鬼切(対妖怪)":{         skill:5,on:0 ,v:[0,260,260,0,0] ,cn:["ヒバリ"              ] ,setf:"68  1 000" ,chkf:["68  1 000"] },
      "忍法乱れ手裏剣":{       skill:5,on:0 ,v:[0,  0,0,0,130] ,cn:["サキ"                ] ,setf:"69  1 000" ,chkf:["69  1 000"] },
      "秘伝の丸薬":{           skill:5,on:0,v:[160,160,160,0,0],cn:["ナギ"                ] ,setf:"69  1 000" ,chkf:["69  1 000"] },
      "燃命の秘薬":{           skill:5,on:0,v:[200,200,200,300000,0],cn:["ナギ"           ] ,setf:"69  1 000" ,chkf:["69  1 000"] },
      "撃滅の天翼":{           skill:5,on:0,v:[ 0,150,-20,0,0] ,cn:["エスタ"              ] ,setf:"610 1 000" ,chkf:["610 1 000"] },
      "聖騎士の守護":{         skill:5,on:0,v:[0,130,250,250,0],cn:["コーネリア"          ] ,setf:"611 1 000" ,chkf:["611 1 000"] },
      "暗黒オーラ斬り":{       skill:5,on:0,v:[0,130,250,250,0],cn:["暗黒騎士"            ] ,setf:"611 0 010" ,chkf:["611 0 010"] },
      "硬気功":{               skill:5,on:0,v:[0,  0,200,  0,0],cn:["アリス"              ] ,setf:"613 1 000" ,chkf:["613 1 000"] },
      "剛力活丹功(1回目)":{    skill:5,on:0,v:[130,200,0,  0,0],cn:["アリス"              ] ,setf:"613 1 000" ,chkf:["613 1 000"] },
      "剛力活丹功(2回目)":{    skill:5,on:0,v:[160,220,0,  0,0],cn:["アリス"              ] ,setf:"613 1 000" ,chkf:["613 1 000"] },
      "剛力活丹功(3回目)":{    skill:5,on:0,v:[190,250,0,  0,0],cn:["アリス"              ] ,setf:"613 1 000" ,chkf:["613 1 000"] },
      "夢想転身(最終)":{       skill:5,on:0,v:[0,300,200,  0,0],cn:["アリス"              ] ,setf:"613 1 000" ,chkf:["613 1 000"] },
      "疾風迅雷":{             skill:5,on:0,v:[0,180,  0,  0,0],cn:["マツリ"              ] ,setf:"614 1 000" ,chkf:["614 1 000"] },
      "ギガバリアブレイク":{   skill:5,on:0,v:[0,170,  0,0,140],cn:["イングリッド"        ] ,setf:"615 1 000" ,chkf:["615 1 000"] },
      "堕天使封印解除":{       skill:5,on:0,v:[0,200,200,0,200],cn:["ソフィー"            ] ,setf:"616 1 000" ,chkf:["616 1 000"] },
      "拡散ギガブラスター":{   skill:5,on:0,v:[0,170,-50,0,200],cn:["ウェンディ"          ] ,setf:"617 1 000" ,chkf:["617 1 000"] },
      "一斉射撃":{             skill:5,on:0 ,v:[0,170,  0,0,0] ,cn:["イブキ"              ] ,setf:"618 1 000" ,chkf:["618 1 000"] },
      "大炎上":{               skill:5,on:0 ,v:[0,200,200,0,0] ,cn:["カヨウ"              ] ,setf:"619 6 000" ,chkf:["619 6 000"] },
      "一尾の解放":{           skill:5,on:0 ,v:[120,120,120,0,0] ,cn:["キュウビ"          ] ,setf:"619 6 001" ,chkf:["619 6 001"] },
      "三尾の解放":{           skill:5,on:0 ,v:[190,190,190,0,0] ,cn:["キュウビ"          ] ,setf:"619 6 001" ,chkf:["619 6 001"] },
      "五尾の解放":{           skill:5,on:0 ,v:[260,260,260,0,0] ,cn:["キュウビ"          ] ,setf:"619 6 001" ,chkf:["619 6 001"] },
      "七尾の解放":{           skill:5,on:0 ,v:[330,330,330,0,0] ,cn:["キュウビ"          ] ,setf:"619 6 001" ,chkf:["619 6 001"] },
      "九尾の解放":{           skill:5,on:0 ,v:[400,400,330,0,0] ,cn:["キュウビ"          ] ,setf:"619 6 001" ,chkf:["619 6 001"] },
      "リミッターカット":{     skill:5,on:0 ,v:[  0,270,270,0,0] ,cn:["グレース"          ] ,setf:"621 1 000" ,chkf:["621 1 000"] },
      "スターバースト":{       skill:5,on:0 ,v:[  0,300,0,0,140] ,cn:["シルセス"          ] ,setf:"621 1 000" ,chkf:["621 1 000"] },
      "エターナルブレーク":{   skill:5,on:0 ,v:[  0,  0,0,0,140] ,cn:["シルセス"          ] ,setf:"621 1 000" ,chkf:["621 1 000"] },
      "聖銀竜の牙槍":{         skill:5,on:0 ,v:[  0,170,  0,0,0] ,cn:["ティファ"          ] ,setf:"622 1 000" ,chkf:["622 1 000"] },
      "聖銀竜の鱗(+牙槍)":{    skill:5,on:0 ,v:[  0,170,170,0,0] ,cn:["ティファ"          ] ,setf:"622 1 000" ,chkf:["622 1 000"] },
      "聖銀竜の血(+牙槍,鱗)":{ skill:5,on:0 ,v:[170,170,170,0,0] ,cn:["ティファ"          ] ,setf:"622 1 000" ,chkf:["622 1 000"] },
      "宮廷槍斧術・攻守の型":{ skill:5,on:0 ,v:[  0,190,  0,0,0] ,cn:["セーラ"            ] ,setf:"624 1 000" ,chkf:["624 1 000"] },
      "秘奥義　不動七連絶刀":{ skill:5,on:0 ,v:[  0,400,  0,0,0] ,cn:["ジークリンデ"      ] ,setf:"626 1 001" ,chkf:["626 1 001"] },
      "聖槍ロンゴミニアド":{   skill:5,on:0 ,v:[  0,  0,180,0,0] ,cn:["ミレイユ"          ] ,setf:"627 1 000" ,chkf:["627 1 000"] },
      "五万騎全殲滅の構え":{   skill:5,on:0 ,v:[  0,150,  0,0,0] ,cn:["ダリューン"        ] ,setf:"627 1 012" ,chkf:["627 1 012"] },
      "火尖槍・焔玉":{         skill:5,on:0 ,v:[  0,200,200,0,0] ,cn:["ナタク"            ] ,setf:"628 11000" ,chkf:["628 11000"] },
      "魔人調伏の一刻":{       skill:5,on:0 ,v:[  0,300,  0,0,0] ,cn:["ラクシャーサ"      ] ,setf:"629 7 000" ,chkf:["628 7 000"] },
      "鬼神の刻":{             skill:5,on:0 ,v:[  0,140,  0,0,0] ,cn:["ラクシャーサ"      ] ,setf:"629 7 000" ,chkf:["628 7 000"] },
      "ヴァルプルギスの夜":{   skill:5,on:0 ,v:[  0,130,  0,0,0] ,cn:["メフィスト"        ] ,setf:"629 7 001" ,chkf:["628 7 001"] },
      "タフネスチャージ":{     skill:5,on:0 ,v:[170,  0,  0,0,0] ,cn:["シンシア"          ] ,setf:"629 11001" ,chkf:["628 11001"] },
      "聖なる覚醒(+タフネスチャージ)":{skill:5,on:0,v:[170,200,200,0,0] ,cn:["シンシア"   ] ,setf:"629 11001" ,chkf:["628 11001"] },
      "鬼首落とし":{           skill:5,on:0 ,v:[  0,300,  0,0,0] ,cn:["シノ"              ] ,setf:"632 8 000" ,chkf:["632 6 000"] },
      "総大将の長ドス":{       skill:5,on:0 ,v:[  0,170,  0,0,0] ,cn:["シノ"              ] ,setf:"632 8 000" ,chkf:["632 6 000"] },
      "シュツルムカノーネ":{   skill:5,on:0 ,v:[  0,120,  0,0,0] ,cn:["エルミラ"          ] ,setf:"633 1 001" ,chkf:["633 1 001"] },
      "羅生門":{               skill:5,on:0 ,v:[  0,150,150,0,0] ,cn:["鬼刃姫"            ] ,setf:"634 8 000" ,chkf:["634 6 000"] },
      "不滅の闘魂":{           skill:5,on:0 ,v:[  0,200,  0,0,0] ,cn:["アナトリア"        ] ,setf:"638 9 000" ,chkf:["638 9 000"] },
      "甲破り砲撃戦モード":{   skill:5,on:0 ,v:[  0,180,  0,0,0] ,cn:["テンマ"            ] ,setf:"641 1 000" ,chkf:["641 1 000"] },
      "アダマスの神器":{       skill:5,on:0 ,v:[  0,200,  0,0,0] ,cn:["白の皇帝"          ] ,setf:"60  1 011" ,chkf:["60  1 011"] },
      "罪弓ミストルティン":{   skill:5,on:0 ,v:[  0,130,  0,0,0] ,cn:["アーシェラ"        ] ,setf:"61011 100" ,chkf:["61011 100"] },
      "魔杖レヴァンテイン":{   skill:5,on:0 ,v:[  0,200,  0,0,0] ,cn:["エステル"          ] ,setf:"61021 100" ,chkf:["61021 100"] },
      "聖女の結界":{           skill:5,on:0 ,v:[  0,140,  0,0,0] ,cn:["イリス"            ] ,setf:"61031 100" ,chkf:["61031 100"] },
      "真癒しの至宝":{         skill:5,on:0 ,v:[  0,  0,0,0,160] ,cn:["リアナ"            ] ,setf:"61031 100" ,chkf:["61031 100"] },
      "コキュートス":{         skill:5,on:0 ,v:[  0,170,  0,0,0] ,cn:["デスピア"          ] ,setf:"61041 100" ,chkf:["61041 100"] },
      "魔弾タスラム(1回目)":{  skill:5,on:0 ,v:[  0,280,  0,0,0] ,cn:["ミネルバ"          ] ,setf:"61051 100" ,chkf:["61051 100"] },
      "魔弾タスラム(2回目)":{  skill:5,on:0 ,v:[  0,320,  0,0,0] ,cn:["ミネルバ"          ] ,setf:"61051 100" ,chkf:["61051 100"] },
      "魔弾タスラム(3回目)":{  skill:5,on:0 ,v:[  0,360,  0,0,0] ,cn:["ミネルバ"          ] ,setf:"61051 100" ,chkf:["61051 100"] },
      "魔弾タスラム(4回目)":{  skill:5,on:0 ,v:[  0,400,  0,0,0] ,cn:["ミネルバ"          ] ,setf:"61051 100" ,chkf:["61051 100"] },
      "魔弾タスラム(最終)":{   skill:5,on:0 ,v:[  0,440,  0,0,0] ,cn:["ミネルバ"          ] ,setf:"61051 100" ,chkf:["61051 100"] },
      "古代龍の逆鱗":{         skill:5,on:0 ,v:[  0,200,  0,0,0] ,cn:["ハクノカミ"        ] ,setf:"61062 100" ,chkf:["61062 100"] },
      "スピリットスナイプ":{   skill:5,on:0 ,v:[  0,200,0,0,160] ,cn:["スー"              ] ,setf:"61071 100" ,chkf:["61071 100"] },
      "二重詠唱":{             skill:5,on:0 ,v:[  0,-20,  0,0,0] ,cn:["エターナー"        ] ,setf:"61091 100" ,chkf:["61091 100"] },
      "超天落岩の計":{         skill:5,on:0 ,v:[  0,300,0,0,300] ,cn:["アイシャ"          ] ,setf:"61101 100" ,chkf:["61101 100"] },
      "破邪滅殺の結界":{       skill:5,on:0 ,v:[  0,700,0,0,170] ,cn:["ミコト"            ] ,setf:"61111 100" ,chkf:["61111 100"] },
      "刻詠の宿業":{           skill:5,on:0 ,v:[  0,  0,0,0,180] ,cn:["リンネ"            ] ,setf:"61131 100" ,chkf:["61131 100"] },
      "暗黒超重力弾":{         skill:5,on:0 ,v:[  0,200,0,0,  0] ,cn:["フレデリカ"        ] ,setf:"61141 100" ,chkf:["61141 100"] },
      "魅惑の舞":{             skill:5,on:0 ,v:[  0,  0,0,0,120] ,cn:["ミヤビ"            ] ,setf:"61151 100" ,chkf:["61151 100"] },
      "アニメイトデッド":{     skill:5,on:0 ,v:[  0,300,0,0,120] ,cn:["メトゥス"          ] ,setf:"61161 100" ,chkf:["61161 100"] },
      "秘法　魔導加速の理":{   skill:5,on:0 ,v:[  0,  0,0,0,120] ,cn:["トワ"              ] ,setf:"61171 100" ,chkf:["61171 100"] },
      "樹縛の秘術":{           skill:5,on:0 ,v:[  0,170,  0,0,0] ,cn:["フィオレ"          ] ,setf:"61181 100" ,chkf:["61181 100"] },
      "樹林繁栄の唄":{         skill:5,on:0 ,v:[  0,150,0,0,  0] ,cn:["フィオレ"          ] ,setf:"61181 100", chkf:["61181 100"] },
      "ハイパーアシッドボム":{ skill:5,on:0 ,v:[  0,250,0,0,  0] ,cn:["マキナ"            ] ,setf:"61191 100", chkf:["61191 100"] },
      "フェイタルダガー":{     skill:5,on:0 ,v:[  0,300,0,0,  0] ,cn:["サバル"            ] ,setf:"61215 100", chkf:["61215 100"] },
      "蛇神の供催":{           skill:5,on:0 ,v:[-50,150,0,0,  0] ,cn:["オロチヒメ"        ] ,setf:"61221 100", chkf:["61221 100"] },
      "魔獣炎操":{             skill:5,on:0 ,v:[  0,200,0,0,  0] ,cn:["モルテナ"          ] ,setf:"61231 100", chkf:["61231 100"] },
      "魔獣獄炎操":{           skill:5,on:0 ,v:[  0,150,0,0,  0] ,cn:["モルテナ"          ] ,setf:"61231 100", chkf:["61231 100"] },
      "暗黒神降臨の儀":{       skill:5,on:0 ,v:[  0,-10,0,0,  0] ,cn:["ドロテア"          ] ,setf:"61233 100", chkf:["61233 100"] },
      "聖魔殲滅弾ラグナレク":{ skill:5,on:0 ,v:[  0,250,0,0,  0] ,cn:["ソシエ"            ] ,setf:"61281 100", chkf:["61281 100"] },
      "聖魔殲滅弾ラグナレク(対悪魔,天使)":{skill:5,on:0 ,v:[0,400,0,0,0],cn:["ソシエ"],setf:"61281 100",chkf:["61281 100"] },
      "デモニックフィールド":{ skill:5,on:0 ,v:[  0,  0,0,0,120] ,cn:["ラピス"            ] ,setf:"61297 100", chkf:["61297 100"] },
      "聖女の叫び声":{         skill:5,on:0 ,v:[0,200,200,0,0] ,cn:["ゼノビア"            ] ,setf:"51  1 000" ,chkf:["51  1 000"] },
      "援軍要請・攻防":{       skill:5,on:0 ,v:[0,150,150,0,0] ,cn:["リーゼロッテ"        ] ,setf:"51  1 000" ,chkf:["51  1 000"] },
      "不可侵の神盾":{         skill:5,on:0 ,v:[0,0,200,200,0] ,cn:["ジェイク"            ] ,setf:"51  1 010" ,chkf:["51  1 010"] },
      "フルガード":{           skill:5,on:0 ,v:[0,0,300,300,0] ,cn:["ジェリウス"          ] ,setf:"52  1 010" ,chkf:["52  1 010"] },
      "鬼神力":{               skill:5,on:0 ,v:[0,300,  0,0,0] ,cn:["モミジ"              ] ,setf:"58  1 000" ,chkf:["58  1 000"] },
      "クイックショットⅡ":{   skill:5,on:0 ,v:[0,190,  0,0,0] ,cn:["オスカー","ほか"     ] ,setf:"XXXXXX1XX" ,chkf:["XXXXXX1XX"] },
      "鉄壁":{                 skill:5,on:0 ,v:[0,0,300,300,0] ,cn:["ザラーム"            ] ,setf:"312 1 012" ,chkf:["312 1 012"] },
      "アヌビスの守護":{       skill:5,on:0 ,v:[0,0,500,  0,0] ,cn:["ザラーム"            ] ,setf:"312 1 012" ,chkf:["312 1 012"] },
      "木々の目覚め":{         skill:5,on:0 ,v:[0,140,  0,0,0] ,cn:["ローリエ"            ] ,setf:"31181 100" ,chkf:["31181 100"] },
/*
  "魔剣覚醒"
 "アデル":[  "攻撃力強化Ⅳ"     ],
*/
    },
    "スキルバフ(射程内)":{
      "士気高揚":{                     on:0 ,v:[0,112,112,0,0] ,cn:["王子"          ] },
      "士気高揚＋英雄の末裔":{         on:0 ,v:[0,115,115,0,0] ,cn:["王子"          ] },
      "士気高揚＋勇者":{               on:0 ,v:[0,117,117,0,0] ,cn:["王子"          ] },
      "士気高揚＋救世主":{             on:0 ,v:[0,119,119,0,0] ,cn:["王子"          ] },
      "士気高揚＋大英雄":{             on:0 ,v:[0,121,121,0,0] ,cn:["王子"          ] },
      "死霊強化":{                     on:0 ,v:[0,300,300,0,0] ,cn:["メメント"      ] ,chkf:["X200XXXXX"] },/*対トークン*/
      "アンデッドマーチ":{             on:0 ,v:[0,300,300,0,0] ,cn:["メメント"      ] ,chkf:["X200XXXXX"] },/*対トークン*/
      "ウォークライ":{                 on:0 ,v:[0,120,  0,0,0] ,cn:["ブランシュ"    ] },
      "デモニックフィールド":{         on:0 ,v:[0,150,  0,0,0] ,cn:["ラピス"        ] },
      "デモニックテリトリー":{         on:0 ,v:[0,150,  0,0,0] ,cn:["ラピス"        ] },
      "破魔聖樹の輝光":{               on:0 ,v:[0,140,  0,0,0] ,cn:["破魔の聖樹"    ] },
      "バトルプロテクション":{         on:0 ,v:[0,  0,150,0,0] ,cn:["エクス"        ] },
      "ゴッドプロテクション":{         on:0 ,v:[0,  0,200,0,0] ,cn:["エクス"        ] },
      "プロテクションI":{              on:0 ,v:[0,  0,150,0,0] ,cn:["イリス"        ] },
      "プロテクションII":{             on:0 ,v:[0,  0,200,0,0] ,cn:["イリス"        ] },
      "聖女の結界":{                   on:0 ,v:[0,  0,250,0,0] ,cn:["イリス"        ] },
      "ダークプロテクション":{         on:0 ,v:[0,  0,170,0,0] ,cn:["ベルディナート"] },
      "隊商防御陣":{                   on:0 ,v:[0,  0,120,0,0] ,cn:["ディエーラ"    ] },
      "守護聖樹の輝光":{               on:0 ,v:[0,  0,200,0,0] ,cn:["守護の聖樹"    ] },
    },
    "スキルバフ(全体)":{
      "英雄の片鱗":{                   on:0 ,v:[0,120,120,0,0] ,cn:["王子【幼少】"] },
      "火竜の炎陣":{                   on:0 ,v:[0,120,  0,0,0] ,cn:["イグニス"    ] },
      "烈火の陣":{                     on:0 ,v:[0,120,  0,0,0] ,cn:["ウズメ","イグニス"] },
      "猛火の陣(1回目)":{              on:0 ,v:[0,120,  0,0,0] ,cn:["ウズメ"      ] },
      "猛火の陣(2回目)":{              on:0 ,v:[0,125,  0,0,0] ,cn:["ウズメ"      ] },
      "猛火の陣(最終)":{               on:0 ,v:[0,130,  0,0,0] ,cn:["ウズメ"      ] },
      "猛将の鼓舞":{                   on:0 ,v:[0,110,  0,0,0] ,cn:["シュウカ"    ] },
      "ブリッツクリーク":{             on:0 ,v:[0,115,115,0,0] ,cn:["レオラ"      ] },
      "シュツルムアングリフ":{         on:0 ,v:[0,125,125,0,0] ,cn:["レオラ"      ] },
      "鉄壁の陣":{                     on:0 ,v:[0,  0,120,0,0] ,cn:["レン"        ] },
      "金城の陣(1回目)":{              on:0 ,v:[0,  0,120,0,0] ,cn:["レン"        ] },
      "金城の陣(2回目)":{              on:0 ,v:[0,  0,125,0,0] ,cn:["レン"        ] },
      "金城の陣(最終)":{               on:0 ,v:[0,  0,130,0,0] ,cn:["レン"        ] },
      "性質変換の秘術":{               on:0 ,v:[0,  0,125,0,0] ,cn:["シャルル"    ] },
    },
    "スキルバフ(系統)":{
      "大山賊時代":{                   on:0 ,v:[200,  0,0,0,0] ,cn:["アマンダ"      ] ,chkf:["X6  XXXXX"] },
      "基本戦術・陣地防御":{           on:0 ,v:[0,  0,120,0,0] ,cn:["ヘレナ"        ] },
      "基本戦術・反転攻勢":{           on:0 ,v:[0,120,  0,0,0] ,cn:["ヘレナ"        ] },
      "応用戦術・堅守強攻(対近接)":{   on:0 ,v:[0,  0,125,0,0] ,cn:["ヘレナ"        ] ,chkf:["XXXXXX0XX"] }, /*近接*/
      "応用戦術・堅守強攻(対遠距離)":{ on:0 ,v:[0,125,  0,0,0] ,cn:["ヘレナ"        ] ,chkf:["XXXXXX1XX"] }, /*遠距離*/
      "一斉射撃":{                     on:0 ,v:[0,130,  0,0,0] ,cn:["イブキ"        ] ,chkf:["XXXXXX1XX"] }, /*遠距離*/
      "妖魔のおもてなし":{             on:0 ,v:[0,140,140,0,0] ,cn:["リーナ"        ] ,chkf:["XXXX3 XXX","XXXX4 XXX","XXXX5 XXX","XXXX9 XXX"] }, /*エルフ・ドワーフ/ゴブリン/オーク/獣人*/
      "宮廷槍斧術・守の型":{           on:0 ,v:[0,  0,180,0,0] ,cn:["セーラ"        ] ,chkf:["60  1 010","60  1 011","X5  XXXXX"] }, /*王子/皇帝/全プリンセス系*/
      "宮廷槍斧術・攻守の型":{         on:0 ,v:[0,150,150,0,0] ,cn:["セーラ"        ] ,chkf:["60  1 010","60  1 011","X5  XXXXX"] }, /*王子/皇帝/全プリンセス系*/
      "槍連撃(熱砂の連携戦術)":{       on:0 ,v:[0,115,115,0,0] ,cn:["ネフティ"      ] ,chkf:["XXXXXXXX3"] }, /*砂漠*/
      "太陽の槍撃(熱砂の連携戦術)":{   on:0 ,v:[0,115,115,0,0] ,cn:["ネフティ"      ] ,chkf:["XXXXXXXX3"] }, /*砂漠*/
      "闇の進撃":{                     on:0 ,v:[0,  0,150,0,0] ,cn:["メフィスト"    ] ,chkf:["XXXX7 XXX","XXXX9 XXX","XXXX5 XXX","XXXX10XXX"] }, /*デーモン/オーク/ゴブリン*/
      "総大将の長ドス・影打":{         on:0 ,v:[0,130,130,0,0] ,cn:["カスミ"        ] ,chkf:["XXXX6 XXX"] }, /*妖怪*/
      "不滅の妖怪仁義":{               on:0 ,v:[0,110,110,0,0] ,cn:["カスミ"        ] ,chkf:["XXXX6 XXX"] }, /*妖怪*/
      "武具鍛錬＋武器職人【男専用】":{ on:0 ,v:[0,120,120,0,0] ,cn:["ゴルドー"      ] ,chkf:["XXXXXX01X"] },
      "武具鍛錬・極致":{               on:0 ,v:[130,120,120,0,0],cn:["ゴルドー"     ] ,chkf:["XXXXXX01X"] },
      "武具鍛錬＋ソードスミス":{       on:0 ,v:[0,120,120,0,0] ,cn:["サンディー"    ] ,chkf:["X1  XXXXX","X8  XXXXX","X11 XXXXX","X14 XXXXX","X26 XXXXX","X35 XXXXX","60  1 010"] }, /*ソードスミス*/
      "ヴァルカンの鎚":{               on:0 ,v:[0,120,120,0,0] ,cn:["サンディー"    ] ,chkf:["X1  XXXXX","X8  XXXXX","X11 XXXXX","X14 XXXXX","X26 XXXXX","X35 XXXXX","60  1 010"] }, /*ソードスミス＝ソル、サムライ、ダークファイター、前軍師、ソードマスター、インペ、王子*/
      "フォージ・アーマー":{           on:0 ,v:[0,120,130,0,0] ,cn:["ティニー"      ] ,chkf:["XXXXXX00X"] }, /*武具女*/
      "フォージ・ウェポン":{           on:0 ,v:[0,130,120,0,0] ,cn:["ティニー"      ] ,chkf:["XXXXXX00X"] }, /*武具女*/
      "堅鱗の癒やし":{                 on:0 ,v:[0,  0,140,0,0] ,cn:["エキドナ"      ] ,chkf:["XXXX2 XXX","X22 XXXXX"] }, /*竜族*/
      "鋭牙の火炎":{                   on:0 ,v:[0,140,  0,0,0] ,cn:["ルビナス"      ] ,chkf:["XXXX2 XXX","X22 XXXXX"] }, /*竜族*/
      "木々の目覚め":{                 on:0 ,v:[0,140,  0,0,0] ,cn:["ローリエ"      ] ,chkf:["X300XXXXX"] }, /*ドルイドトークン*/
      "樹林繁栄の唄":{                 on:0 ,v:[0,150,  0,0,0] ,cn:["フィオレ"      ] ,chkf:["X300XXXXX"] }, /*ドルイドトークン*/
      "魔獣炎操":{                     on:0 ,v:[0,200,  0,0,0] ,cn:["モルテナ"      ] ,chkf:["X202XXXXX"] }, /*魔物トークン*/
      "魔獣獄炎操":{                   on:0 ,v:[0,150,  0,0,0] ,cn:["モルテナ"      ] ,chkf:["X202XXXXX"] }, /*魔物トークン*/
      "帝国の勇者＋アダマスの神器":{   on:0 ,v:[0,125,125,0, 0] ,cn:["白の皇帝"        ] ,chkf:["XXXXXXXX1"] }
    },
    "スキルバフ(レア指定)":{
      "ダモクレスの剣":{               on:0 ,v:[0,120,120,0,0] ,cn:["ロゼット"        ] ,chkf:["2XXXXXXXX"] }
    },
    "ステ加算値バフ(ダンサー)":{
      "魅惑の舞":{                     on:0 ,v:[0, 700, 700,0,0],cn:["ミヤビ"         ] },
      "不可侵の神事舞":{               on:0 ,v:[0,1200,1200,0,0],cn:["ミヤビ"         ] },
      "ラストダンス":{                 on:0 ,v:[0,1000,1000,0,0],cn:["ビビアン"       ] },
      "アンコールダンス":{             on:0 ,v:[0,1000,1000,0,0],cn:["ビビアン"       ] },
      "オートステップ":{               on:0 ,v:[0,1000,1000,0,0],cn:["ビビアン"       ] },
      "パッションステップ":{           on:0 ,v:[0,1000,1000,0,0],cn:["ワルツ"         ] },
      "エンドレスワルツ":{             on:0 ,v:[0, 300, 300,0,0],cn:["ワルツ"         ] },
      "癒しの舞":{                     on:0 ,v:[0,1000,1000,0,0],cn:["ハナ"           ] },
      "ソウルステップ":{               on:0 ,v:[0,1000,1000,0,0],cn:["ハナ","マーニー"] },
      "エスカレートステップ(1回目)":{  on:0 ,v:[0,1000,1000,0,0],cn:["マーニー"       ] },
      "エスカレートステップ(2回目)":{  on:0 ,v:[0,1200,1200,0,0],cn:["マーニー"       ] },
      "エスカレートステップ(最終)":{   on:0 ,v:[0,1300,1300,0,0],cn:["マーニー"       ] }
    },
    "ステ加算値バフ(政務官)":{
      "全力サポート":{                 on:0 ,v:[0,1000,1000,0,0],cn:["アンナ","アンナ(支給服)","アンナ(軍服)"]},
      "究極サポート":{                 on:0 ,v:[0,1200,1200,0,0],cn:["アンナ(水着)"] },
    }
  };
  var inobj=[null];
  var outobj=[null];
  var t=document.getElementById("t");
  var saveword={
    charmap:"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-.",
    addS:function(n,v,l){
      n[0]=n[0]+(v<<n[1]);
      n[1]=n[1]+l;
      while( n[1] >= 6 ){
        n[2] += saveword.charmap.substr(n[0]&63,1);
        n[0] >>= 6;
        n[1] -= 6;
      }
    },
    getS:function(n,l){
      var r;
      while( n[1] < l && n[2].length > 0 ){
        n[0] += saveword.charmap.indexOf(n[2].substr(0,1)) << n[1];
        n[1] +=6;
        n[2] = n[2].substr(1,n[2].length-1);
      }
      r=n[0]&((1<<l)-1);
      n[0] >>= l;
      n[1] -= l;
      return r;
    },
    backupstr:function(){
      var w=[0,0,""]; /*<=*/
      var i,j;
      saveword.addS(w, 0,12); /*12bit:version */
      saveword.addS(w, getV(inobj[  0]) ,14); /*14bit:HP */
      saveword.addS(w, getV(inobj[  1]) ,14); /*14bit:攻撃*/
      saveword.addS(w, getV(inobj[  2]) ,14); /*14bit:防御*/
      saveword.addS(w, getV(inobj[  3]) ,14); /*14bit:魔耐*/
      saveword.addS(w, getV(inobj[  4]) ,14); /*14bit:射程*/
      saveword.addS(w, getV(inobj[  5]) , 3); /* 3bit:レア*/
      saveword.addS(w, getV(inobj[  6]) , 9); /* 9bit:職*/
      saveword.addS(w, getV(inobj[  7]) , 5); /*5bit:属性*/
      saveword.addS(w, getV(inobj[  8]) , 1); /*1bit:近・遠*/
      saveword.addS(w, getV(inobj[  9]) , 2); /*6bit:性別 */;
      saveword.addS(w, getV(inobj[ 10]) , 2); /*2bit:所属 */
      saveword.addS(w, getV(inobj[ 11]) ,14); /*14bit:ダンサー攻撃 */
      saveword.addS(w, getV(inobj[ 12]) ,14); /*14bit:ダンサー防御 */
      saveword.addS(w, getV(inobj[ 13]) ,14); /*14bit:アンナ攻撃 */
      saveword.addS(w, getV(inobj[ 14]) ,14); /*14bit:アンナ防御 */
      for( i in buf ) for( j in buf[i] ){
        saveword.addS(w, buf[i][j].on  ,1); /*1:選択・非選択 */
      }
      if( w[1] > 0 ) w[2] += saveword.charmap.substr( w[0]&63,1 ); /*末尾の6BITに満たない端数 */
      for(i=j=0 ; i<w[2].length ; i++ ) j=j^saveword.charmap.indexOf(w[2].substr(i,1)); /* CHECK-SUM */
      w[2] += saveword.charmap.substr( j,1 );
      return w[2];
    },
    restorestr:function(s){
      var i,j,k;
      var w=[0,0,s];
      k = saveword.getS(w, 12);
      setV(inobj[  0] , saveword.getS(w,14));
      setV(inobj[  1] , saveword.getS(w,14));
      setV(inobj[  2] , saveword.getS(w,14));
      setV(inobj[  3] , saveword.getS(w,14));
      setV(inobj[  4] , saveword.getS(w,14));
      setV(inobj[  5] , saveword.getS(w, 3));
      setV(inobj[  6] , saveword.getS(w, 9));
      setV(inobj[  7] , saveword.getS(w, 5));
      setV(inobj[  8] , saveword.getS(w, 1));
      setV(inobj[  9] , saveword.getS(w, 2));
      setV(inobj[ 10] , saveword.getS(w, 2));
      setV(inobj[ 11] , saveword.getS(w,14));
      setV(inobj[ 12] , saveword.getS(w,14));
      setV(inobj[ 13] , saveword.getS(w,14));
      setV(inobj[ 14] , saveword.getS(w,14));
      for( i in buf ) for( j in buf[i] ){
        buf[i][j].on = saveword.getS(w,1);
      }
    },
    checkstr:function(str){
      var i,j;
      for(i=j=0 ; i+1 < str.length ; i++ ){
        j=j^saveword.charmap.indexOf(str.substr(i,1));
      }
      return ( j == saveword.charmap.indexOf(str.substr(i,1)) );
    }
 }

 function cnvN(v){
    if( (""+v).length <= 3 ) return v;
    if( (""+v).substr(0,(""+v).length-3) == "-" ) return v;
    return cnvN((""+v).substr(0,(""+v).length-3))+","+(""+v).substr((""+v).length-3,3);
 }
 function getV(o){
    if( o.getAttribute("is") == "x-d" ) return o.getAttribute("value")/1;
    switch( o.className ){
      case "x-b":
      case "x-l":
      case "x-d": return o.getAttribute("value")/1; break;
      default: return o.value; break;
    }
  }
  function setV(o,n){
    if( o.getAttribute("is") == "x-d" ){
          o.setAttribute("value",n);
          o.innerHTML=(o.getAttribute("pre")?o.getAttribute("pre"):"")+cnvN(n)+(o.getAttribute("sur")?o.getAttribute("sur"):"");
          return;
    }
    switch( o.className ){
      case "x-b":
          var l=o.children.length;
          if( n >= 2 ) n %= l;
          o.setAttribute("value",n);
          if( l <= 1 ){
            o.children[0].className=(n?"bon":"");
          }else
          if( o.getAttribute("type") != "radio" ){
            o.children[0].value=l[n%l];
          }else{
            var i;
            for( i=0 ; i<l ; i++ ){
              o.children[i].className=(i==(n%l))?"bon":"";
            }
          }
          break;
      case "x-l":
          o.setAttribute("value",n);
          o.innerText=cnvN(n);
          break;
      case "x-d":
          o.setAttribute("value",n);
          o.innerHTML=(o.pre?o.pre:"")+cnvN(n)+(o.sur?o.sur:"");
          break;
      default: o.value=n; break;
    }
  }

 function openRotate(n){
   var i,j,grp;
   var cnta0=0; // opened off cnt
   var cnta1=0; // opened on cnt
   var cntg0=0;
   var cntg1=0;
   var cntg2=0; //opened off
   var cntg3=0; //opened on

   for( i=t.rows.length ; --i >= 0 ; ){
     grp= t.rows[i].getAttribute("grp");
     if( ! grp || t.rows[i].cells[0].className == "csw"  /* <="明細行じゃない" */
      || t.rows[i].style["display"] == "none" ) continue; // closed
     if( buf[grp][t.rows[i].cells[2].innerText].on ){ // ON
       cnta1++;
       if( grp == n ) cntg1++;
     }else{
       cnta0++;
       if( grp == n ) cntg0++;
     }
   }
   for( i=t.rows.length ; --i >= 0 ; ){
     grp= t.rows[i].getAttribute("grp");
     if( ! grp ) continue;
     if( n && grp != n ) continue; //指定グループじゃない
     if( t.rows[i].cells[0].className == "csw" ){ /* <="グループ行" */
       t.rows[i].cells[0].innerText = cntg2?"＋":(cntg3?"÷":"－");
       cntg2=cntg3=0;
       continue;
     }
     if( n ){ //指定
       if( cntg0 ){
         if( buf[grp][t.rows[i].cells[2].innerText].on == 0 ){
           if( t.rows[i].style["display"] != "none" ) t.rows[i].style["display"] = "none";
         }else{
           cntg3++;
         }
       }else if( cntg1 ){
         if( t.rows[i].style["display"] != "none" ) t.rows[i].style["display"] = "none";
       }else{
         if( t.rows[i].style["display"] != "table-row" ) t.rows[i].style["display"] = "table-row";
         if(buf[grp][t.rows[i].cells[2].innerText].on ) cntg3++; else cntg2++;
       }
       continue;
     }
     if( cnta0 ){
       if( buf[grp][t.rows[i].cells[2].innerText].on == 0 ){
         if( t.rows[i].style["display"] != "none" ) t.rows[i].style["display"] = "none";
       }else{
         cntg3++;
       }
     }else if( cnta1 ){
       if( t.rows[i].style["display"] != "none" ) t.rows[i].style["display"] = "none";
     }else{
       if( t.rows[i].style["display"] != "table-row" ) t.rows[i].style["display"] = "table-row";
       if(buf[grp][t.rows[i].cells[2].innerText].on ) cntg3++; else cntg2++;
     }
   }
 }

 function getFlgStr(){
  return (getV( inobj[ 5] )+" "  ).substr(0,1)
       + (getV( inobj[ 6] )+"   ").substr(0,3)
       + (getV( inobj[ 7] )+"  " ).substr(0,2)
       + (getV( inobj[ 8] )+" "  ).substr(0,1)
       + (getV( inobj[ 9] )+" "  ).substr(0,1)
       + (getV( inobj[10] )+" "  ).substr(0,1);
 }
 function setFlg( str ){
   var l;
   l=str.substr(0,1); if( l != "X"   ) setV( inobj[ 5] , l   );
   l=str.substr(1,3); if( l != "XXX" ) setV( inobj[ 6] , l/1 );
   l=str.substr(4,2); if( l != "XX"  ) setV( inobj[ 7] , l/1 );
   l=str.substr(6,1); if( l != "X"   ) setV( inobj[ 8] , l   );
   l=str.substr(7,1); if( l != "X"   ) setV( inobj[ 9] , l   );
   l=str.substr(8,1); if( l != "X"   ) setV( inobj[10] , l   );
 }
 function chkFlgStr( stat , checker ){
   var i,l;
   for( i=0 ; i < checker.length ; i++ ){
     l=checker[i].substr(0,1); if( l != "X"   && stat.substr(0,1)   != l   ) continue;
     l=checker[i].substr(1,3); if( l != "XXX" && stat.substr(1,3)/1 != l/1 ) continue;
     l=checker[i].substr(4,2); if( l != "XX"  && stat.substr(4,2)   != l/1 ) continue;
     l=checker[i].substr(6,1); if( l != "X"   && stat.substr(6,1)   != l   ) continue;
     l=checker[i].substr(7,1); if( l != "X"   && stat.substr(7,1)   != l   ) continue;
     l=checker[i].substr(8,1); if( l != "X"   && stat.substr(8,1)   != l   ) continue;
     return true;
   }
   return false;
 }

 function onoff(i,j,k){
   var l,m;
   if( ! buf[i] || ! buf[i][j] ) return;
   if( k ){
     /* "称号が違うものはOFF" */
     if(/^王子/.test(buf[i][j].cn[0])) for( l in buf ) for ( m in buf[l] ){ 
       if( /^王子/.test(buf[l][m].cn[0]) ){
         if( /^士気高揚/.test(j) ) buf[l][m].on=0;
         else
         if( buf[i][j].cn[0] != buf[l][m].cn[0]
          &&(buf[i][j].length <= 1 || buf[i][j].cn[1] != buf[l][m].cn[0] )
          &&(buf[l][m].length <= 1 || buf[i][j].cn[0] != buf[l][m].cn[1] ) )
            buf[l][m].on=0;
       }
     }
     switch( i ){ 
       case "スキルバフ(自己)":
         if( buf[i][j].cn.length == 1 ) for( l in buf ) if( /^編成バフ/.test(l) || /^配置バフ/.test(l) ) for( m  in buf[l] )
           if( buf[i][j].cn[0] == buf[l][m].cn[0] || (buf[l][m].length > 1 && buf[i][j].cn[0] == buf[l][m].cn[1] ) )
              buf[l][m].on=1; /* <="自己バフから、そのユニの編成・配置バフがあればそちらもON" */
       case "ステ加算値バフ(政務官)":
       case "ステ加算値バフ(ダンサー)":
         /* "１つのみ" */
         for( l in buf[i] ) buf[i][l].on=0;
         break;
       default:
     }
   }
   buf[i][j].on = k?1:0;
   if( buf[i][j].setf ) setFlg( buf[i][j].setf );
   doDraw(null);
 }

 function doDraw(ev){
   var i,j,k,l,m,n;
   var v=[0,0,0]; /*値、ダンサーステ、アンナステ*/
   var w;
   var flg = [getFlgStr() ,"51151 100" ,"61001 100" ];
   n=-1;
   for( m=0 ; m<5 ; m++ ){
     v[0]=v[1]=v[2]=0;
     w= [ [0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]];/*"i-dacer-anna:編成、射程、スキル射程、スキル全体、スキル系統、スキル特殊、スキル自己、ステ加算"*/
     for( i=t.rows.length ; --i >= 0 ; ){ /* <="表示位置を憶えていないのでループは画面で行う" */
       k=t.rows[i].getAttribute("grp");
       if( ! k || ! buf[k] ) continue;
       if( t.rows[i].className == "bufftype" ){
         if( /^編成バフ/.test(k) ) for(o=0;o<3;o++) w[o][0] += v[o];
         if( /^配置バフ/.test(k) ) for(o=0;o<3;o++) w[o][1] += v[o];
         if( /^編成バフ|^配置バフ/.test(k) ){
           if( (v[0]%10000) != (v[1]%10000) || (v[0]%10000) != (v[2]%10000) ){
             t.rows[i].cells[2+m].innerText = "＋"+(v[0]%10000)+","+(v[1]%10000)+","+(v[2]%10000)+"％";
           }else{
             t.rows[i].cells[2+m].innerText=(v[0]%10000)?("＋"+(v[0]%10000)+"％"):"";
           }
           for(o=0;o<3;o++) v[o] =(v[o]-(v[o]%10000))/10000;
           if( v[0] != v[1] || v[0] != v[2] ){
             t.rows[i].cells[2+m].innerText += "＋"+v[0]+","+v[1]+","+v[2];
           }else if( v[0] ){
             t.rows[i].cells[2+m].innerText += "＋"+v[0];
           }
         }
         else if( /^スキルバフ/.test(k) ){
           t.rows[i].cells[2+m].innerText= (v[0] != v[1] || v[0] != v[2])?("×"+(v[0]?(v[0]/100.0):"-")+","+(v[1]?(v[1]/100.0):"-")+","+(v[2]?(v[2]/100.0):"-")):v[0]?("×"+(v[0]/100.0)):"";
           switch(k){
             case "スキルバフ(自己)":     for(o=0;o<3;o++) if( w[o][2] < v[o] ) w[o][2] = v[o];  break;
             case "スキルバフ(射程内)":   for(o=0;o<3;o++) if( w[o][3] < v[o] ) w[o][3] = v[o];  break;
             case "スキルバフ(全体)":     for(o=0;o<3;o++) if( w[o][4] < v[o] ) w[o][4] = v[o];  break;
             case "スキルバフ(系統)":     for(o=0;o<3;o++) if( w[o][5] < v[o] ) w[o][5] = v[o];  break;
             case "スキルバフ(レア指定)": for(o=0;o<3;o++) if( w[o][6] < v[o] ) w[o][6] = v[o];  break;
           }
         }
         else if( "ステ加算値バフ(ダンサー)" == k && w[1][7] < v[1] ) w[1][7] = v[1];
         else if( "ステ加算値バフ(政務官)"   == k && w[2][7] < v[2] ) w[2][7] = v[2];
         v[0]=v[1]=v[2]=0;
         continue;
       }
       l=t.rows[i].cells[2].innerText; /*バフ名*/
       if( buf[k][l] && buf[k][l].on ){
         if( m == 0 ) t.rows[i].className="on";
         l=buf[k][t.rows[i].cells[2].innerText]; 
         j=l.v[m]; /*"画面の値は装飾されて使えないので配列から取得" */
         if( ! l.chkf ){
           if( /^編成バフ|^配置バフ/.test(k) ) for(o=0;o<3;o++) v[o] += l.v[m];
           if( (/^スキルバフ/.test(k) || k.substr(0,7) == "ステ加算値バフ") ) for(o=0;o<3;o++) if( v[o] < l.v[m] ) v[o] = l.v[m];
         }else for( o=0 ; o<3 ; o++ ){
           if( ! chkFlgStr( flg[o] , l.chkf ) ) continue;
           if( /^編成バフ|^配置バフ/.test(k) ) v[o] += l.v[m];
           if( (/^スキルバフ/.test(k) || k.substr(0,7) == "ステ加算値バフ") && v[o] < l.v[m] ) v[o] = l.v[m];
         }
       }else{
         if( m == 0 ) t.rows[i].className="";
       }
     }
     v=[0,0,0,0,0,0];
     for(o=0;o<3;o++){
       if( m != 1 && m != 2 && o != 0 ) continue;
       if( o != 2 || chkFlgStr( flg[0] , ["60  1 010"] ) ){
         v[o]=getV(inobj[ [m,m+10,m+12][o] ]);
         v[o+3]=0;
         for( i=0 ;  i <= 7 ; i++ ){
           if( (i==7 && o == 0 ) || ! w[o][i] ) continue;
           if( i == 7 ) while( v[o+3]>0 ) { v[o] = (v[o] - (v[o]%10)) /10 ; v[o+3]--; } /* <=整数化 */
           if( i <=1 ){ 
             v[o] = v[o] * (w[o][i]%10000) + v[o]*100 ;
             if(i==0) v[o] = (v[o]-(v[o] % 100))/100; /*<=整数化 */
             else v[o+3]+=2; /*<=整数化しない*/
             if( w[o][i] >= 10000 ){
               v[o] += ((w[o][i]-(w[o][i]%10000))/10000);
             }
           }else{ v[o] *= w[o][i]; v[o+3]+=2; }
           if( v[o+3] > 0 && v[o] >= 10 && v[o] % 10 == 0 ){ v[o] /= 10 ; v[o+3]--; } /*正規化*/
           if( v[o+3] > 0 && v[o] >= 10 && v[o] % 10 == 0 ){ v[o] /= 10 ; v[o+3]--; } /*正規化*/
         }
       }
       if( o ) v[o+3]++; /*ダンサー、アンナは1/10 */
       if( v[o+3] > 0 && v[o] >= 10 && v[o] % 10 == 0 ){ v[o] /= 10 ; v[o+3]--; } /*正規化*/
       if( v[o+3] > 0 && v[o] >= 10 && v[o] % 10 == 0 ){ v[o] /= 10 ; v[o+3]--; } /*正規化*/
       outobj[ [m,m+4,m+6][o]   ].innerText= (""+v[o]).substr(0,(""+v[o]).length-v[o+3])+"."+(""+v[o]).substr((""+v[o]).length-v[o+3],8) ; /*0,1,2,3,4*/
       while( v[o+3] > 0 ) { v[o] = (v[o] - (v[o]%10)) /10 ; v[o+3]--; } /* <=整数化 */
     }
     setV( outobj[10+m], Math.floor(v[0]/1+v[1]/1+v[2]/1) ); /*10,11,12,13,14*/
   }
   inobj[19].value=saveword.backupstr();
 }

  function doSelect(e){
    switch( e.target.parentNode.tagName.toUpperCase() ){
      case "TR":
        if( e.target.className=="csw" ){
          openRotate( e.target.parentNode.getAttribute("grp") );
        }else{
          var i=e.target.parentNode.getAttribute("grp");
          if( e.target.parentNode.className != "bufftype" && i ){
            var j=e.target.parentNode.cells[2].innerText;
            if( buf[i] && buf[i][j] ) onoff(i,j,1-buf[i][j].on );
          }
        }
        break;
      case "SPAN":
        if( e.target.parentNode.className == "x-b" ){
          if( e.target.parentNode.getAttribute("type") == "radio" ){
            setV(e.target.parentNode, e.target.getAttribute("num")/1);
          }else{
            setV(e.target.parentNode , getV(e.target.parentNode)+1);
          }
          doDraw(e);
          break;
        }
        if( e.target.id == "restoreB" ){
          if( getV(inobj[19]).length >= 2 && saveword.checkstr(getV(inobj[19])) ){
             alert("呪文はメンテで互換が無くなるのでページ保存で退避しておくの推奨");
            location.href="?"+getV(inobj[19]);
          }else{
            alert("その呪文は正しくないようだ");
          }
        }
        break;
      default:
    }
  }

 (function(){  /* initialize */
    var i,j,k,l,m,n;
    for(i=0;i<=20;i++) inobj [i]=document.getElementById( ((i<10)? "in0": "in")+i );
    for(i=0;i<=14;i++) outobj[i]=document.getElementById( ((i<10)?"out0":"out")+i );
    var lbl=[
        [ ["鉄","銅","銀","金","青","白","黒"] ]
       ,[ ["王子・皇帝","ソルジャー","ヘビーアーマー","ワルキューレ","ローグ","プリンセス系","バンデッド","竜兵・竜戦士","侍","忍者","天馬騎士","ダークファイター","アベンジャー","モンク","前衛軍師","魔法剣士","堕天使","くぐつ使い","セーラー","天孤","神官戦士","メイジアーマー","竜騎士","ボウライダー","メイド","ヴァンパイアロード","ソードマスター","ロイヤルガード","仙人・仙猿","魔人","戦の精霊","ダークストーカー","ぬらりひょん","重装砲兵","鬼","インペリアルナイト","天狗","鍛冶師","剣闘士","キョンシー","雷神","モンスターブレーカー"]
         ,["政務官","アーチャー","メイジ","ヒーラー","ウィッチ","パイレーツ","ドラゴンシャーマン","ヴァンパイアハンター","シャーマン","ビショップ","後衛軍師","陰陽師","召喚士","風水士","砲術士","ダンサー","ネクロマンサー","クロノウィッチ","ドルイド","アルケミスト","レンジャー","シーフ","呪術師","魔物使い","ダークプリースト","エンチャンター","マーチャント","フェンリルシャーマン","モンスターハンター","デモンサモナー","エレメンタラー","猫又","道化師"]
         ,["スケルトン","マーセナリー","魔獣","式鬼","インプ・デーモン","ゴーレム","スチームタンク","化け猫","大ガマ","ケットシー","ジャック Ｏ ランタン","霧分身","火エレメント","土エレメント","風エレメント","水エレメント","闇エレメント","トラバサミ","ミミック","砲撃ポイント"]
         ,[ "生命の木","避禍予見の鏡影","プリズムミラー","芸術家の逸品"] ]
       ,[ ["属性なし","人間","竜人","エルフ(ハーフ・ダーク含む)","ドワーフ","獣人","妖怪","デーモン","アンデッド","オーク","ゴブリン","他(仙人・仙猿・精霊)"] ]
       ,[ ["近接","遠距離"] ]
       ,[ ["女","男","無"] ]
       ,[ ["他","帝国","パルス","砂漠"] ]
      ];
    for( i=0 ; i< lbl.length ; i++ ) for( j=0 ; j<lbl[i].length ; j++ ) for( k=0 ; k<lbl[i][j].length ; k++ ){
      n=document.createElement( (i==1 || i==2 )?"OPTION":"INPUT" );
      n.value=(i==1 || i==2)?(k+j*100):lbl[i][j][k];
      if(i==1 || i==2){ n.innerText=lbl[i][j][k]; inobj[5+i].add(n); }else{ n.setAttribute("num",k); n.type="button"; inobj[5+i].appendChild(n); }
    }
    for( i in buf ) {
      k = t.insertRow(-1);
      k.innerHTML="<th class='csw'>－</th><th colspan=2 id='h01'>"+i+"</th><th></th><th></th><th></th><th></th><th></th><th></th>";
      k.className="bufftype";
      k.setAttribute("grp",i);
      for( j in buf[i] ){
        k = t.insertRow(-1); k.classname="buff"; k.setAttribute("grp",i);
        l = k.insertCell(0); l.outerHTML="<th nowrap></th>";
        for( l="<td nowrap>",m=0 ; m< buf[i][j].cn.length ; m++){
          if( m ) l += "<br>";
          l += buf[i][j].cn[m];
        }
        k.insertCell(1).outerHTML=l+"</td>" ;
        l = k.insertCell(2); l.outerHTML="<td nowrap>"+ j+"</td>";
        for( n=0 ; n<5 ; n++ ){
          l = k.insertCell(n+3);
          l.style["textAlign"]="center";
          if( buf[i][j].v[n] > 10000 /*<-％と絶対値の敷居*/ ) l.innerText = "+"+((buf[i][j].v[n]-(buf[i][j].v[n]%10000))/10000.0);
          else if( buf[i][j].v[n] > 100 /*<-加算と乗算の敷居*/ ) l.innerText = "×"+(buf[i][j].v[n]/100.0);
          else if( buf[i][j].v[n] < 0 ) l.innerText = buf[i][j].v[n]+"％"; 
          else if( buf[i][j].v[n] ) l.innerText = "+"+buf[i][j].v[n]+"％"; 
        }
        l = k.insertCell(n+3);
       if( ! /.*自己/.test(i) )
        for( k=0 ; buf[i][j].chkf && k <  buf[i][j].chkf.length ; k++ ){
          n=buf[i][j].chkf[k];
          if( k == 4 ) l.innerHTML += "<br>";
          if( n == "60  1 010" ){ l.innerText += "[王子]"; continue; }
          if( n == "60  1 011" ){ l.innerText += "[皇帝]"; continue; }
          if( n == "45  1 000" ){ l.innerText += "[カグヤ]"; continue; }
          if( n == "XXXXXX00X" ){ l.innerText += "[近接女性]"; continue; }
          if( n == "XXXXXX01X" ){ l.innerText += "[近接男性]"; continue; }
          m=n.substr(0,1); if( m != "X"   &&                                n.substr(1,8) == "XXXXXXXX" ){ l.innerText += "["+lbl[0][0][m/1]+"]"; continue; }
          m=n.substr(1,3); if( m != "XXX" && n.substr(0,1) == "X"        && n.substr(4,5) == "XXXXX"    ){ l.innerText += "["+lbl[1][(m-(m%100))/100][m%100]+"]"; continue; }
          m=n.substr(4,2); if( m != "XX"  && n.substr(0,4) == "XXXX"     && n.substr(6,3) == "XXX"      ){ l.innerText += "["+lbl[2][0][m/1]+"]"; continue; }
          m=n.substr(6,1); if( m != "X"   && n.substr(0,6) == "XXXXXX"   && n.substr(7,2) == "XX"       ){ l.innerText += "["+lbl[3][0][m/1]+"]"; continue; }
          m=n.substr(7,1); if( m != "X"   && n.substr(0,7) == "XXXXXXX"  && n.substr(8,1) == "X"        ){ l.innerText += "["+lbl[4][0][m/1]+"]"; continue; }
          m=n.substr(8,1); if( m != "X"   && n.substr(0,8) == "XXXXXXXX"                                ){ l.innerText += "["+lbl[5][0][m/1]+"]"; continue; }
          if( ! /.*X/.test(n) ) l.innerText += "[自身？]";
        }
      }
    }

    for( i=0 ; i < 2 ; i++ ){
      j=location[["search","hash"][i]];
      if( j && j.length > 1 ){
        j=j.substring(j.indexOf(["?","#"][i])+1);
        if( saveword.checkstr(j) ){
          saveword.restorestr(j);
          return;
        }
        alert("その呪文は正しくないようだ");
      }
    }

    setV(inobj[ 0],2600); /* HP */
    setV(inobj[ 1],540);  /* atk */
    setV(inobj[ 2],700);  /* def */
    setV(inobj[ 3], 20);  /* mgt */
    setV(inobj[ 4],  0);  /* range */
    setV(inobj[11],444);  /* d-atk */
    setV(inobj[12],444);  /* d-def */
    setV(inobj[13],294);  /* a-atk */
    setV(inobj[14],197);  /* a-def */
    onoff("スキルバフ(自己)","アイギスの神器",1);
 })();


  document.body.addEventListener( "change", function(ev){
    if( ev.target.id == "in06" ){
      if( getV(ev.target) < 100 ){ /* 近接職 */
        setV( inobj[ 8] , 0 );
      }else if( getV(ev.target) < 200 ){ /* 遠距離職 */
        setV( inobj[ 8] , 1 );
      }else{ /*<="トークン選択時" */
        setV( inobj[ 7] , 0 );
        setV( inobj[ 8] , (getV(ev.target)>=300)?1:0);
        setV( inobj[ 9] , 2 );
        setV( inobj[10] , 0 );
      }
    }
    if( ev.target.id != "in19" ) doDraw(ev);
  });
  var touchObj=null;
  document.body.addEventListener( "touchstart",function(ev){ touchObj=ev.target; } );
  document.body.addEventListener( "touchend",function(ev){ if( touchObj==ev.target){ doSelect(ev);} touchObj=null; } );
  document.body.addEventListener( "click",doSelect );

  doDraw(olev);
}
</script>
<div nowrap><b>千年戦争アイギス　バフ計算機　</b>
<span>復活の呪文<input type="text" size=68 style="font-family:monospace;" id="in19"/><input type="button" id="restoreB" value="復活" id="in20"/></span>
<div style="display:inline-block; font-size:13px;"><a href="meisei.html">...名声値カレンダー</a><br><a href="ikusei2.html">...育成試算表</a></div></div>
<table  id="t">
<tr><th></th><th>キャラ･クラス</th><th>アビ・スキル</th><th nowrap >HP</th><th>攻撃</th><th>防御</th><th>魔耐</th><th>射程</th><th>対象</th></tr>
<tr class="f" >
  <th colspan=2 rowspan=3>計算対象ユニ</th>
  <td colspan=9>
   <span class="x-b" id="in05" type="radio"></span>
   <select id="in06"></select>
   <select id="in07"></select>
  </td>
</tr>
<tr class="f" >
  <th nowrap rowspan=2>
    <span class="x-b" id="in08" type="radio"></span>
    <span class="x-b" id="in09" type="radio"></span>
    <br>
    <span class="x-b" id="in10" type="radio"></span>
  </th>
  <td ><input type="number" id="in00" min=0 max=9999 size=4 /></td>
  <td ><input type="number" id="in01" min=0 max=9999 size=4 /></td>
  <td ><input type="number" id="in02" min=0 max=9999 size=4 /></td>
  <td ><input type="number" id="in03" min=0 max=9999 size=4 /></td>
  <td ><input type="number" id="in04" min=0 max=9999 size=4 /></td>
  <td rowspan=2></td>
</tr>
<tr class="f" ><td is="x-d" id="out00"></td><td is="x-d" id="out01"></td><td is="x-d" id="out02"></td><td is="x-d" id="out03"></td><td is="x-d" id="out04"></td></tr>
<tr class="f" ><th colspan=3 rowspan=2> ダンサー</th><td rowspan=2></td><td ><input type="number" id="in11" min=0 max=9999 size=4 /></td><td ><input type="number" id="in12" min=0 max=9999 size=4 /></td><td rowspan=2></td><td rowspan=2></td><td rowspan=2></td></tr>
<tr class="f" ><td is="x-d" id="out05"></td><td is="x-d" id="out06"></td></tr>
<tr class="f" ><th colspan=3 rowspan=2>アンナ</th><td rowspan=2></td><td ><input type="number" id="in13" min=0 max=9999 size=4 /></td><td ><input type="number" id="in14" min=0 max=9999 size=4 /></td><td rowspan=2></td><td rowspan=2></td><td rowspan=2>[王子]</td></tr>
<tr class="f" ><td is="x-d" id="out07"></td><td is="x-d" id="out08"></td></tr>
<tr class="t"><th class="csw">■</th><th nowrap colspan=2>バフ後</th><td is="x-d" id="out10"></td><td is="x-d" id="out11"></td><td is="x-d" id="out12"></td><td is="x-d" id="out13"></td><td is="x-d" id="out14"></td><td></td></tr>
</table>
</body>
